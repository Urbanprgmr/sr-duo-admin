<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Battle Royale Tournament Manager</title>
  <style>
    /* Add your CSS styles here */
  </style>
</head>
<body>
  <div class="container">
    <h1>Battle Royale Tournament Manager</h1>
    <div class="toggle-buttons">
      <button onclick="toggleSection('rules')">Toggle Rules</button>
      <button onclick="toggleSection('matches')">Toggle Matches</button>
      <button onclick="toggleSection('announcements')">Toggle Announcements</button>
    </div>
    <div id="addTeamSection">
      <h2>Add Team</h2>
      <input type="text" id="teamName" placeholder="Enter Team Name">
      <input type="number" id="playerCount" placeholder="Number of Players (1-5)" min="1" max="5">
      <button onclick="addTeam()">Add Team</button>
    </div>
    <div class="teams" id="teams"></div>
    <div class="rules" id="rulesSection">
      <h2>Tournament Rules</h2>
      <textarea id="tournamentRules" placeholder="Enter tournament rules here..."></textarea>
      <button onclick="saveRules()">Save Rules</button>
    </div>
    <div class="points-settings" id="pointsSection">
      <h2>Points Settings</h2>
      <label>Points Per Kill:</label>
      <input type="number" id="pointsPerKill" placeholder="e.g., 10">
      <label>Points Per Position (comma-separated):</label>
      <input type="text" id="pointsPerPosition" placeholder="e.g., 100,80,60,40,20">
      <button onclick="savePointsSettings()">Save Points Settings</button>
    </div>
    <div id="createMatchSection">
      <h2>Create Match</h2>
      <input type="text" id="matchName" placeholder="Enter Match Name (e.g., Match 1)">
      <select id="matchTeams" multiple>
        <option value="all">Select All Teams</option>
      </select>
      <input type="datetime-local" id="matchTime">
      <button onclick="createMatch()">Create Match</button>
    </div>
    <div class="matches" id="matches"></div>
    <div class="announcements" id="announcementsSection">
      <h2>Announcements</h2>
      <textarea id="announcementMessage" placeholder="Enter announcement..."></textarea>
      <button onclick="addAnnouncement()">Add Announcement</button>
      <div id="announcementsList"></div>
    </div>
  </div>
  <script>
    const JSONBIN_API_KEY = '$2a$10$dQjqnLB2i7wOWKDOwzJ0UuOqSwzQWUJSBBRrbHgz4aVkml7rG89wK';
    const JSONBIN_BIN_ID = '67d385168561e97a50eb8dbb';
    let data = {
      teams: [],
      matches: [],
      rules: { content: '', visible: true },
      pointsPerKill: 10,
      pointsPerPosition: [100, 80, 60, 40, 20],
      announcements: []
    };

    async function fetchData() {
      const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}/latest`, {
        headers: { 'X-Master-Key': JSONBIN_API_KEY }
      });
      const json = await response.json();
      if (json.record) data = json.record;
      renderAll();
    }

    async function saveData() {
      await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json', 'X-Master-Key': JSONBIN_API_KEY },
        body: JSON.stringify(data)
      });
    }

    function toggleSection(section) {
      switch (section) {
        case 'rules':
          data.rules.visible = !data.rules.visible;
          break;
        case 'matches':
          data.matches.forEach(match => match.visible = !match.visible);
          break;
        case 'announcements':
          data.announcements.forEach(announcement => announcement.visible = !announcement.visible);
          break;
      }
      saveData();
    }

    function renderAll() {
      renderTeams();
      renderMatches();
      renderAnnouncements();
      renderRules();
    }

    // Add other functions (addTeam, deleteTeam, editTeam, etc.) here

    fetchData();
  </script>
</body>
</html>
